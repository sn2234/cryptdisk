# SOURCES for use with BUILD command

TARGETNAME=CryptDisk30
TARGETPATH=obj
TARGETTYPE=DRIVER

!IF ("$(DDKBUILDENV)"=="chk") || ("$(DDKBUILDENV)"=="checked")
BUILDTYPE = CHECKED
CRYPTLIB=Crypto_d.lib
!ELSE
BUILDTYPE = FREE
CRYPTLIB=Crypto.lib
NTDEBUG=
MSC_OPTIMIZATION = /O2
!ENDIF

BUFFER_OVERFLOW_CHECKS = LINK_ONLY
USER_C_FLAGS = /Fa"$(TARGETPATH)/" /FAs

TARGETLIBS=$(BASEDIR)\lib\wnet\i386\ntoskrnl.lib \
	$(BASEDIR)\lib\wnet\i386\hal.lib \
	$(BASEDIR)\lib\wnet\i386\BufferOverflowK.lib \
	$(TARGETPATH)\..\..\..\$(CRYPTLIB)

RCNOFONTMAP=1
LINK_LIB_IGNORE=4210
#LINKER_FLAGS = /FIXED:NO
#LINKER_FLAGS = /SAFESEH:NO 

PRECOMPILED_INCLUDE=StdAfx.h
PRECOMPILED_CXX=1

INCLUDES= $(BASEDIR)\inc\wnet;$(CRYPTO_LIB_DIR)\SOURCE;.;

SOURCES= \
	DiskCipher.cpp \
	DiskHeader.cpp \
	DiskHeaderTools.cpp \
	main.cpp \
	Tools.cpp \
	DisksManager.cpp \
	VirtualDisk.cpp \
	DiskCipherAesV3.cpp \
	DiskCipherTwofishV3.cpp \
	Memtools.cpp
