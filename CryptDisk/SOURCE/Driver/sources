# SOURCES for use with BUILD command

TARGETNAME=CryptDisk40
TARGETPATH=obj
TARGETTYPE=DRIVER

!IF ("$(DDKBUILDENV)"=="chk") || ("$(DDKBUILDENV)"=="checked")
BUILDTYPE = CHECKED
!IF ("$(_BUILDARCH)"=="AMD64")
BIN_SUFFIX=x64
!ELSE
BIN_SUFFIX=
!ENDIF
CRYPTLIB=Crypto_$(BIN_SUFFIX)d.lib
!ELSE
BUILDTYPE = FREE
!IF ("$(_BUILDARCH)"=="AMD64")
BIN_SUFFIX=_x64
!ELSE
BIN_SUFFIX=
!ENDIF
CRYPTLIB=Crypto$(BIN_SUFFIX).lib
NTDEBUG=
MSC_OPTIMIZATION = /O2
!ENDIF

BUFFER_OVERFLOW_CHECKS = LINK_ONLY
USER_C_FLAGS = /Fa"$(TARGETPATH)/" /FAs

TARGETLIBS=$(DDK_LIB_PATH)\ntoskrnl.lib \
	$(DDK_LIB_PATH)\hal.lib \
	$(DDK_LIB_PATH)\BufferOverflowK.lib \
	$(CRYPTO_LIB_BIN_DIR)\$(CRYPTLIB)

#LIB=
RCNOFONTMAP=1
LINK_LIB_IGNORE=4210,4099
#LINKER_FLAGS = /FIXED:NO
#LINKER_FLAGS = /SAFESEH:NO 

PRECOMPILED_INCLUDE=stdafx.h
PRECOMPILED_CXX=1

INCLUDES= $(BASEDIR)\inc\wnet;$(CRYPTO_LIB_DIR)\SOURCE;.;

SOURCES= \
	DiskCipher.cpp \
	DiskHeaderTools.cpp \
	main.cpp \
	Tools.cpp \
	DisksManager.cpp \
	VirtualDisk.cpp \
	DiskCipherAesV3.cpp \
	DiskCipherTwofishV3.cpp \
	Memtools.cpp
